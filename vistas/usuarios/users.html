<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gestión de Usuarios | Inventario Forestal</title>

    <!-- Carga de Tailwind CSS (para utilidades) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <script>
        // Configuración de Tailwind para usar la fuente Inter y colores personalizados
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', '-apple-system', 'Segoe UI', 'Roboto', 'Ubuntu', 'Cantarell', 'Noto Sans', 'Helvetica', 'Arial'],
                    },
                    colors: {
                        'brand': '#2e7d32',
                        'bg': '#eaf6ea',
                        'ink': '#1f2a1f',
                        'danger': '#c0392b',
                    }
                }
            }
        }
    </script>

    <!-- Enlace a la hoja de estilos personalizada -->
    <link rel="stylesheet" href="/vistas/usuarios/users.css">

    <!-- Phosphor Icons para iconos modernos -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body>
    <div class="app">
        <!-- Barra superior con el título de la aplicación -->
        <header class="topbar">Inventario Forestal Nacional</header>

        <aside class="sidebar">
            <nav class="nav" aria-label="Menú">
                <a href="/vistas/estadisticas/Dashboard.html"><i class="ph ph-house-simple"></i> Inicio</a>
                <a href="/vistas/arboles/FormArboles.html"><i class="ph ph-tree"></i> Árboles</a>
                <a href="/vistas/conglomerado/conglomerado.html">Conglomerados</a>
                <a href="/vistas/subparcelas/subparcela.html">Subparcelas</a>
                <a href="/vistas/usuarios/users.html"><i class="ph ph-users-three"></i> Usuarios</a>
                <a href="/vistas/infoUsuario/user.html"><i class="ph ph-gear"></i> Configuración</a>
                <a href="/vistas/empleados/empleados.html">Empleados</a>
                <a href="/vistas/equipos/equipos.html">Equipos</a>
            </nav>
            <button id="logout-btn" class="logout-btn" style="margin-top: 30px; text-align: left;">
                <i class="ph ph-sign-out"></i> Cerrar Sesión
            </button>
        </aside>
        <div class="container">
            <h1>Gestión de Usuarios</h1>

            <!-- MENSAJE DE ESTADO -->
            <div id="status-message" class="hidden p-3 mb-4 rounded-lg text-sm font-medium border max-w-lg mx-auto"
                role="alert"></div>

            <!-- FORMULARIO DE USUARIOS -->
            <section class="form-card" aria-labelledby="user-form-title">
                <h2 id="user-form-title">Datos del Usuario</h2>
                <form id="form-usuario" autocomplete="on" novalidate>
                    <div class="form-grid">
                        <div class="field">
                            <label for="nombreUsuario">Nombre Completo</label>
                            <input id="nombreUsuario" type="text" required>
                        </div>
                        <div class="field">
                            <label for="cedula">Cédula / ID</label>
                            <input id="cedula" type="text" required>
                        </div>
                        <div class="field">
                            <label for="rol">Rol</label>
                            <select id="rol" required>
                                <option value="">Seleccione</option>
                                <option>Técnico Forestal</option>
                                <option>Coordinador de Campo</option>
                                <option>Administrador</option>
                            </select>
                        </div>
                        <div class="field">
                            <label for="correo">Correo Electrónico</label>
                            <input id="correo" type="email" required>
                        </div>
                        <div class="field">
                            <label for="telefono">Teléfono (opcional)</label>
                            <input id="telefono" type="tel">
                        </div>
                        <div class="field">
                            <label for="fechaIngreso">Fecha de Ingreso</label>
                            <input id="fechaIngreso" type="date" required>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn-primary" id="save-user-button">Guardar Usuario</button>
                        <button type="reset" class="btn-secondary">Limpiar</button>
                    </div>
                </form>
            </section>

            <!-- TABLA DE USUARIOS -->
            <section class="table-card">
                <h2>Lista de Usuarios</h2>
                <div class="table-container">
                    <table id="tabla-usuarios" aria-live="polite">
                        <thead>
                            <tr>
                                <th>Cédula</th>
                                <th>Nombre</th>
                                <th>Rol</th>
                                <th>Correo</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Contenido inyectado por JS -->
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- MODAL (ver detalle) -->
            <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
                <div class="modal-content" role="document">
                    <button id="modal-close" class="modal-close" aria-label="Cerrar"><i class="ph ph-x"></i></button>
                    <h3>Detalle del Usuario</h3>
                    <div id="modal-body" class="modal-body">
                        <!-- detalles inyectados por JS -->
                    </div>
                </div>
            </div>

            <!-- MODAL DE CONFIRMACIÓN CUSTOM (Reemplaza a window.confirm) -->
            <div id="confirm-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
                <div class="modal-content" style="max-width: 400px;">
                    <h3 id="confirm-title" style="color: var(--danger);">Confirmación</h3>
                    <p id="confirm-message" class="text-sm text-gray-700 mt-2 mb-4"></p>
                    <div class="flex justify-end gap-3">
                        <button id="confirm-cancel" class="btn-secondary">Cancelar</button>
                        <button id="confirm-ok" class="btn-primary"
                            style="background-color: var(--danger);">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enlace al archivo de JavaScript -->
    <script src="users.js"></script>
</body>

</html>