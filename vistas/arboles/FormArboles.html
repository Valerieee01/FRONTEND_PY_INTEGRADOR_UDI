<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inventario Forestal</title>

  <!-- Carga de Tailwind CSS para utilidades y tipografía -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <script>
    // Configuración de Tailwind para usar la fuente Inter y colores personalizados
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', '-apple-system', 'Segoe UI', 'Roboto', 'Ubuntu', 'Cantarell', 'Noto Sans', 'Helvetica', 'Arial'],
          },
          colors: {
            'brand': '#2e7d32',
            'bg': '#eaf6ea',
            'ink': '#1f2a1f',
            'danger': '#c0392b',
          }
        }
      }
    }
  </script>

  <!-- Enlace a la hoja de estilos personalizada -->
  <link rel="stylesheet" href="/vistas/arboles/estiloArboles.css">

  <!-- Phosphor Icons para iconos modernos -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>

<body>
  <div class="app">

    <!-- Barra superior con el título de la aplicación -->
    <header class="topbar">Inventario Forestal Nacional</header>

    <aside class="sidebar">
      <nav class="nav" aria-label="Menú">
        <a href="/vistas/estadisticas/Dashboard.html"><i class="ph ph-house-simple"></i> Inicio</a>
        <a href="/vistas/arboles/FormArboles.html"><i class="ph ph-tree"></i> Árboles</a>
        <a href="/vistas/conglomerado/conglomerado.html">Conglomerados</a>
        <a href="/vistas/subparcelas/subparcela.html">Subparcelas</a>
        <a href="/vistas/usuarios/users.html"><i class="ph ph-users-three"></i> Usuarios</a>
        <a href="/vistas/infoUsuario/user.html"><i class="ph ph-gear"></i> Configuración</a>
        <a href="/vistas/empleados/empleados.html">Empleados</a>
        <a href="/vistas/equipos/equipos.html">Equipos</a>
      </nav>
      <button id="logout-btn" class="logout-btn" style="margin-top: 30px; text-align: left;">
        <i class="ph ph-sign-out"></i> Cerrar Sesión
      </button>
    </aside>

    <div class="container">
      <div class="page">
        <h1>Registro de Árboles</h1>

        <!-- FORMULARIO -->
        <section class="form-card" aria-labelledby="form-title">
          <h2 id="form-title">Datos del Árbol</h2>

          <form id="form-arbol" autocomplete="on" novalidate>
            <div class="form-grid">
              <div class="field">
                <label for="conglomerado">Conglomerado</label>
                <input id="conglomerado" type="text" required>
              </div>

              <div class="field">
                <label for="subparcela">Subparcela</label>
                <input id="subparcela" type="text" required>
              </div>

              <div class="field">
                <label for="numeroArbol">N° Árbol</label>
                <input id="numeroArbol" type="text" required>
              </div>

              <div class="field">
                <label for="fecha">Fecha de registro</label>
                <input id="fecha" type="date" required>
              </div>

              <div class="field">
                <label for="nombreCientifico">Nombre científico</label>
                <input id="nombreCientifico" type="text" required>
              </div>

              <div class="field">
                <label for="nombreComun">Nombre común (opcional)</label>
                <input id="nombreComun" type="text">
              </div>

              <div class="field">
                <label for="familia">Familia</label>
                <input id="familia" type="text" required>
              </div>

              <div class="field">
                <label for="dap">DAP (cm)</label>
                <input id="dap" type="number" min="1" required>
              </div>

              <div class="field">
                <label for="alturaTotal">Altura total (m)</label>
                <input id="alturaTotal" type="number" min="1" required>
              </div>

              <div class="field">
                <label for="categoria">Categoría</label>
                <select id="categoria" required>
                  <option value="">Seleccione</option>
                  <option>Brinzal</option>
                  <option>Latizal</option>
                  <option>Fustal</option>
                  <option>Fustal grande</option>
                </select>
              </div>

              <div class="field">
                <label for="condicion">Condición</label>
                <select id="condicion" required>
                  <option value="">Seleccione</option>
                  <option>SD. Ausencia de daño</option>
                  <option>DB. Daño biológico</option>
                  <option>DM. Daño mecánico</option>
                  <option>EB. Estrangulado por bejuco</option>
                  <option>Q. Quebrado</option>
                </select>
              </div>

              <div class="field">
                <label for="formaFuste">Forma del fuste</label>
                <select id="formaFuste" required>
                  <option value="">Seleccione</option>
                  <option>CIL. Cilíndrico</option>
                  <option>FA. Fuste acanalado</option>
                  <option>INC. Inclinado</option>
                  <option>IRR. Irregular</option>
                  <option>RT. Raíces tablares</option>
                </select>
              </div>

              <div class="field full">
                <label for="observaciones">Observaciones</label>
                <textarea id="observaciones" rows="3" required placeholder="Ingrese observaciones..."></textarea>
              </div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn-primary">Guardar</button>
              <button type="reset" class="btn-secondary">Limpiar</button>
            </div>
          </form>
        </section>

        <!-- BOTÓN PESTAÑA DE FILTROS (oculto hasta que haya registros; se muestra automáticamente si hay registros) -->
        <section class="filters-section">
          <button id="toggle-filters" class="filter-toggle" aria-expanded="false" aria-controls="filters-panel"
            style="display:none;">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true" focusable="false">
              <path d="M3 5h18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              <path d="M7 12h10" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              <path d="M10 19h4" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
            Buscar por filtros
            <span class="chev" aria-hidden="true">▾</span>
          </button>

          <div id="filters-panel" class="filters-panel" hidden>
            <form id="filters-form" class="filters-form" onsubmit="return false;">
              <div class="filter-grid">
                <div class="field">
                  <label for="f-conglomerado">N° Conglomerado</label>
                  <input id="f-conglomerado" type="text" placeholder="Ej: CGL-01">
                </div>

                <div class="field">
                  <label for="f-subparcela">Subparcela</label>
                  <input id="f-subparcela" type="text" placeholder="Ej: SP-01">
                </div>

                <div class="field">
                  <label for="f-especie">Especie (nombre científico)</label>
                  <input id="f-especie" type="text" placeholder="Ej: Cedrela odorata">
                </div>

                <div class="field">
                  <label for="f-condicion">Estado</label>
                  <select id="f-condicion">
                    <option value="">Cualquiera</option>
                    <option>SD. Ausencia de daño</option>
                    <option>DB. Daño biológico</option>
                    <option>DM. Daño mecánico</option>
                    <option>EB. Estrangulado por bejuco</option>
                    <option>Q. Quebrado</option>
                  </select>
                </div>

                <div class="field">
                  <label for="f-fecha-inicial">Fecha inicial</label>
                  <input id="f-fecha-inicial" type="date">
                </div>

                <div class="field">
                  <label for="f-fecha-final">Fecha final</label>
                  <input id="f-fecha-final" type="date">
                </div>
              </div>

              <div class="filters-actions">
                <button id="apply-filters" class="btn-primary">Aplicar filtros</button>
                <button id="clear-filters" class="btn-secondary">Limpiar filtros</button>
              </div>
            </form>
          </div>
        </section>

        <!-- TABLA -->
        <section class="table-card">
          <h2>Árboles Registrados</h2>

          <div class="table-container">
            <table id="tabla-arboles" aria-live="polite">
              <thead>
                <tr>
                  <th>Conglomerado</th>
                  <th>Subparcela</th>
                  <th>Fecha</th>
                  <th>Nombre científico</th>
                  <th>Nombre común</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </section>

        <!-- MODAL (ver detalle) -->
        <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" hidden>
          <div class="modal-content" role="document">
            <button id="modal-close" class="modal-close" aria-label="Cerrar">✕</button>
            <h3>Detalle del árbol</h3>
            <div id="modal-body" class="modal-body">
              <!-- detalles inyectados por JS -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Enlace al archivo de JavaScript -->
  <script src="/vistas/arboles/validaciones.js"></script>
</body>

</html>